# 멤버 클래스는 되도록 static으로 만들라
* 중첩 클래스란 다른 클래스 안에 정의된 클래스를 말한다.
* 중첩 클래스는 자신을 감싼 바깥 클래스에서만 쓰여야 하며, 그 외 쓰임새가 있다면 반드시 톱레벨 클래스로 만들어야 한다.
* 중첩 클래스 종류는 다음과 같다.
  * 정적 멤버 클래스
  * 비정적 멤버 클래스    -> 내부 클래스
  * 익명 클래스          -> 내부 클래스
  * 지역 클래스          -> 내부 클래스

## 멤버 클래스
### 정적 멤버 클래스
* 다른 클래스 안에 선언되고, 바깥 클래스의 private 멤버에도 접근할 수 있다.
* 단 멤버(필드)들이 static 해야만 접근이 가능하다.
  * 당연한 말이다 **static이 가장 먼저 생성되기 때문에 그 다음 생성되는 non-static 변수들은 사용할 수 없다.**
* 흔히 바깥 클래스와 함께 쓰일 때만 유용한 public 도우미 클래스로 쓰인다.
* **중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있으면 정적 멤버 클래스로 만들어야 한다.**

### 비정적 멤버 클래스
* 외적으로만 봤을때는 `static`이 있느냐 없느냐 차이이지만 내부적으로 봤을때 차이가 크다.
* 비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다.
* 그래서 비정적 멤버 클래스의 인스턴스 메서드에서 정규화된 this를 사용해 바깥 인스턴스의 메서드를 호출할 수 있다.
  * **정규화된 this란 클래스명.this 형태로 바깥 클래스 이름을 명시하는 용법을 말한다.**
* 비정적 멤버 클래스는 바깥 인스턴스 없이는 생성할 수 없다!
* 비정적 멤버 클래스 인스턴스와 바깥 인스턴스 사이의 관계는 멤버 클래스가 인스턴화될 때 확립. 그 후에는 변경 불가.
* 이 관계는 비정적 멤버 클래스의 생성자를 호출할 때 자동으로 만들어짐.

### 결론
* **멤버 클래스가 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정젝 멈버 클래스를 만들자.**
  * 다시 설명하지만 static를 생략하면 바깥 인스턴스로의 숨운 외부 참조를 가지게 된다.
  * 이는 즉시 메모리 낭비로 이어진다. (내부 클래스를 사용하게 되면 외부 클래스를 GC하지 못하기 떄문에 메모리 누수에도 문제점)

## 익명 클래스
* 익명클래스는 말 그대로 이름도 없으며 바깥 클래스의 멤버도 아니다.
* 멤버 클래스들과 달리 쓰이는 시점에 선언과 동시에 인스턴스가 만들어 져 코드의 어디서든 생성이 가능하다.
* 그래서 오직 비정적(None-static)인 문맥에서 사용될 때만 바깥 클래스의 인스턴스를 참조할 ㅅ ㅜ있다.
* Static 문맥에서는 상수 이외의 정적멤버는 가질 수 없다.
* 위의 문제들때문에 제약이 많은 편에 속한다. 다시 한번 살펴보자면
  * 선언된 위치에서만 인스턴스를 만들 수 있다.
  * instanceof 검사나 클래스의 이름이 필요한 작업은 당연히 수행하지 못한다.

## 로컬(지역) 클래스
* 지역변수를 선언할 수 있는 곳이라면 실질적으로 어디서든 선언이 가능하다. 스코프도 지역변수와 동일하다.
  * 결국 메서드 내부에 클래스를 정의하는 경우를 말한다.
* 생소한 만큼 가장 드물게 사용되는 방식.
* 다른 세 중첩 클래스의 특징을 가지고 있다.
  * 멤버 클래스처럼 이름이 있고 반복해서 사용이 가능하다.
  * 익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있다.
  * 정적 멤버를 가질 수 없으며, 가독성을 위해 짧게 작성해야 한다.

## 결론
* 메서드 밖에서 사용해야 하거나, 메서드 안에서 정의하기에 너무 길다면, **멤버 클래스**
  * 멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적
  * 그렇지 않으면 정적

* 중첩 클래스가 한 메서드 안에서만 쓰이면서, 그 인스턴스를 생성하는 지점이 단 한곳이면 익명 or 로컬(지역) 클래스
  * **해당 타입을 쓰기에 적합한 클래스나 인터페이스가 이미 존재한다면 익명 클래스.**
  * 그렇지 않으면 지역 클래스